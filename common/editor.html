<!DOCTYPE html>
<html>
<head>
    <title>Bug Shooter Editor</title>
    <script src="js/require.js" data-main="editor.js"></script>
    <link rel="stylesheet" type="text/css" href="css/jquery-ui.css" />
    <link rel="stylesheet" type="text/css" href="css/icons.css" />
    <link rel="stylesheet" type="text/css" href="css/editor.css" />
</head>
<body>
    <div id="issue_dialog" title="Submit screenshot to an issue" data-bind="with: Details">
        <div class="divLabel">
			<label for="issue">Issue:</label>
		</div>
		<div class="divControl">
			<input id="issue" />
        </div>
        <div class="divLabel">
			<label for="comment">Comment:</label>
		</div>
		<div class="divControl">
			<textarea id="comment" data-bind="value: Comment"></textarea>
        </div>
        <div>
            <input data-bind="click: send" type="button" value="Submit"/>
        </div>
    </div>
    <div data-bind="with: Editor" class="screen">
        <div id="toolbar-container">
            <span id="toolbar">
                <i title="Rectangle" class="button" data-bind="click: setRectangle, css: {active: ActiveInstrument() == 'Rectangle'}">
                    <i class="icon-large icon-rect"></i>
                </i>
                <i title="Arrow" class="button" data-bind="click: setArrow, css: {active: ActiveInstrument() == 'Arrow'}">
                    <i class="icon-large icon-arrow"></i>
                </i>
                <i title="Text" class="button" data-bind="click: setText, css: {active: ActiveInstrument() == 'Text'}">
                    <i class="icon-large icon-font"></i>
                </i>
                <i title="Crop" class="button" data-bind="click: setCrop, css: {active: ActiveInstrument() == 'Crop'}">
                    <i class="icon-large icon-crop"></i>
                </i>
                <i class="separator"></i>
                <!-- ko foreach: Colors -->
                <i class="button color" data-bind="attr: {title: $data}, click: $parent.setColor, css: {active: $parent.ActiveColor() == $data}">
                    <i class="icon-large" data-bind="style: {backgroundColor : $data}"></i>
                </i>
                <!-- /ko -->
                <i class="separator"></i>
                <i title="Undo" class="button" data-bind="click: undo">
                    <i class="icon-large icon-undo"></i>
                </i>
                <i class="separator"></i>
                <i title="Submit" class="button" data-bind="click: getImageData">
                    <i class="icon-large icon-ok"></i>
                </i>
            </span>
        </div>
        <canvas id="canvas"></canvas>
        <canvas id="output"></canvas>
        <div data-bind="event: {mousedown: editorDown, mouseup: editorUp, mousemove: editorMove}" id="editor"></div>
        <textarea id="texted" rows="20" data-bind="visible: IsTextMode, value: ActiveText, valueUpdate: 'afterkeydown'"></textarea>
    </div>
</body>
</html>