<!DOCTYPE html>
<html>
<head>
    <title>BugSnap Editor</title>
    <script src="js/require.js" data-main="editor.js"></script>
    <link rel="stylesheet" type="text/css" href="css/jquery-ui.css" />
    <link rel="stylesheet" type="text/css" href="css/icons.css" />
    <link rel="stylesheet" type="text/css" href="css/editor.css" />
</head>
<body>
    <div id="issue_dialog" title="Submit screenshot to an issue" data-bind="with: Details">
        <ul class="tabContainer">
            <li class="tab active" data-target="createForm">
                Create issue
            </li>
            <li class="tab" data-target="attachForm">
                Attach screenshot
            </li>
        </ul>
        <div id="forms">
            <div id="createForm" class="form active">
                <div class="divLabel">
                    <label for="title">Title:</label>
                </div>
                <div class="divControl">
                    <input id="title" class="control" />
                </div>
                <div class="divLabel">
                    <label for="project">Project:</label>
                </div>
                <div class="divControl">
                    <select id="project" class="control" data-bind="value: ProjectId"></select>
                </div>

                <div class="divLabel">
                    <label for="component">Component:</label>
                </div>
                <div class="divControl">
                    <select id="component" class="control"></select>
                </div>

                <div class="divLabel">
                    <label for="description">Description:</label>
                </div>
                <div class="divControl">
                    <textarea id="description" rows="8" class="control"></textarea>
                </div>
                <div>
                    <input class="ui-button right" data-bind="click: createIssue" type="button" value="Create Issue"/>
                </div>
            </div>
            <div id="attachForm" class="form">                
                <div class="divLabel">
                    <label for="issue">Issue:</label>
                </div>
                <div class="divControl">
                    <input id="issue" class="control" />
                </div>
                <div class="divLabel">
                    <label for="comment">Comment:</label>
                </div>
                <div class="divControl">
                    <textarea id="comment" class="control" rows="10" data-bind="value: Comment"></textarea>
                </div>
                <div>
                    <input class="ui-button right" data-bind="click: send" type="button" value="Submit"/>
                </div>
            </div>
        </div>
    </div>
    <div data-bind="with: Editor" class="screen">
        <div id="toolbar-container" data-bind="event: {mouseup: editorUp}">
            <span id="toolbar">
                <i title="Rectangle" class="button" data-bind="click: setRectangle, css: {active: ActiveInstrument() == 'Rectangle'}">
                    <i class="icon-large icon-rect"></i>
                </i>
                <i title="Arrow" class="button" data-bind="click: setArrow, css: {active: ActiveInstrument() == 'Arrow'}">
                    <i class="icon-large icon-arrow"></i>
                </i>
                <i title="Text" class="button" data-bind="click: setText, css: {active: ActiveInstrument() == 'Text'}">
                    <i class="icon-large icon-font"></i>
                </i>
                <i title="Crop" class="button" data-bind="click: setCrop, css: {active: ActiveInstrument() == 'Crop'}">
                    <i class="icon-large icon-crop"></i>
                </i>
                <i class="separator"></i>
                <!-- ko foreach: Colors -->
                <i class="button color" data-bind="attr: {title: $data}, click: $parent.setColor, css: {active: $parent.ActiveColor() == $data}">
                    <i class="icon-large" data-bind="style: {backgroundColor : $data}"></i>
                </i>
                <!-- /ko -->
                <i class="separator"></i>
                <i title="Undo" class="button" data-bind="click: undo">
                    <i class="icon-large icon-undo"></i>
                </i>
                <i class="separator"></i>
                <i title="Submit" class="button" data-bind="click: send">
                    <i class="icon-large icon-ok"></i>
                </i>
                <i title="Save" class="button" data-bind="click: download">
                    <i class="icon-large icon-save"></i>
                </i>
                <a id="download" download="screenshot.png" style="display: none">Link ready</a>
                <i title="Options" class="button right" data-bind="click: showOptionsPage">
                    <i class="icon-large icon-options"></i>
                </i>
            </span>
        </div>
        <canvas id="canvas"></canvas>
        <canvas id="output"></canvas>
        <div data-bind="event: {mousedown: editorDown, mouseup: editorUp, mousemove: editorMove}" id="editor"></div>
        <textarea id="texted" style="display: none" data-bind="value: ActiveText, valueUpdate: 'afterkeydown'"></textarea>
    </div>
</body>
</html>